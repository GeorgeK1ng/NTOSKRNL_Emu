EXTRN   gDumpMode:BYTE

EXTRN   gScsiPortMoveMemory:QWORD
EXTRN   gScsiPortNotification:QWORD
EXTRN   gStorPortAllocateRegistryBuffer:QWORD
EXTRN   gStorPortBusy:QWORD
EXTRN   gStorPortCompleteRequest:QWORD
EXTRN   gStorPortConvertUlongToPhysicalAddress:QWORD
EXTRN   gStorPortDebugPrint:QWORD
EXTRN   gStorPortDeviceBusy:QWORD
EXTRN   gStorPortDeviceReady:QWORD
EXTRN   gStorPortFreeDeviceBase:QWORD
EXTRN   gStorPortFreeRegistryBuffer:QWORD
EXTRN   gStorPortGetBusData:QWORD
EXTRN   gStorPortGetDeviceBase:QWORD
EXTRN   gStorPortGetLogicalUnit:QWORD
EXTRN   gStorPortGetPhysicalAddress:QWORD
EXTRN   gStorPortGetScatterGatherList:QWORD
EXTRN   gStorPortGetSrb:QWORD
EXTRN   gStorPortGetUncachedExtension:QWORD
EXTRN   gStorPortGetVirtualAddress:QWORD
EXTRN   gStorPortLogError:QWORD
EXTRN   gStorPortMoveMemory:QWORD
EXTRN   gStorPortNotification:QWORD
EXTRN   gStorPortPause:QWORD
EXTRN   gStorPortPauseDevice:QWORD
EXTRN   gStorPortQuerySystemTime:QWORD
EXTRN   gStorPortReadPortBufferUchar:QWORD
EXTRN   gStorPortReadPortBufferUlong:QWORD
EXTRN   gStorPortReadPortBufferUshort:QWORD
EXTRN   gStorPortReadPortUchar:QWORD
EXTRN   gStorPortReadPortUlong:QWORD
EXTRN   gStorPortReadPortUshort:QWORD
EXTRN   gStorPortReadRegisterBufferUchar:QWORD
EXTRN   gStorPortReadRegisterBufferUlong:QWORD
EXTRN   gStorPortReadRegisterBufferUshort:QWORD
EXTRN   gStorPortReadRegisterUchar:QWORD
EXTRN   gStorPortReadRegisterUlong:QWORD
EXTRN   gStorPortReadRegisterUshort:QWORD
EXTRN   gStorPortReady:QWORD
EXTRN   gStorPortRegistryWrite:QWORD
EXTRN   gStorPortResume:QWORD
EXTRN   gStorPortResumeDevice:QWORD
EXTRN   gStorPortSetBusDataByOffset:QWORD
EXTRN   gStorPortSetDeviceQueueDepth:QWORD
EXTRN   gStorPortStallExecution:QWORD
EXTRN   gStorPortSynchronizeAccess:QWORD
EXTRN   gStorPortValidateRange:QWORD
EXTRN   gStorPortWritePortBufferUchar:QWORD
EXTRN   gStorPortWritePortBufferUlong:QWORD
EXTRN   gStorPortWritePortBufferUshort:QWORD
EXTRN   gStorPortWritePortUchar:QWORD
EXTRN   gStorPortWritePortUlong:QWORD
EXTRN   gStorPortWritePortUshort:QWORD
EXTRN   gStorPortWriteRegisterBufferUchar:QWORD
EXTRN   gStorPortWriteRegisterBufferUlong:QWORD
EXTRN   gStorPortWriteRegisterBufferUshort:QWORD
EXTRN   gStorPortWriteRegisterUchar:QWORD
EXTRN   gStorPortWriteRegisterUlong:QWORD
EXTRN   gStorPortWriteRegisterUshort:QWORD

EXTRN   __imp_ScsiPortMoveMemory:PROC
EXTRN   __imp_ScsiPortNotification:PROC
EXTRN   __imp_StorPortAllocateRegistryBuffer:PROC
EXTRN   __imp_StorPortBusy:PROC
EXTRN   __imp_StorPortCompleteRequest:PROC
EXTRN   __imp_StorPortConvertUlongToPhysicalAddress:PROC
EXTRN   __imp_StorPortDebugPrint:PROC
EXTRN   __imp_StorPortDeviceBusy:PROC
EXTRN   __imp_StorPortDeviceReady:PROC
EXTRN   __imp_StorPortFreeDeviceBase:PROC
EXTRN   __imp_StorPortFreeRegistryBuffer:PROC
EXTRN   __imp_StorPortGetBusData:PROC
EXTRN   __imp_StorPortGetDeviceBase:PROC
EXTRN   __imp_StorPortGetLogicalUnit:PROC
EXTRN   __imp_StorPortGetPhysicalAddress:PROC
EXTRN   __imp_StorPortGetScatterGatherList:PROC
EXTRN   __imp_StorPortGetSrb:PROC
EXTRN   __imp_StorPortGetUncachedExtension:PROC
EXTRN   __imp_StorPortGetVirtualAddress:PROC
EXTRN   __imp_StorPortLogError:PROC
EXTRN   __imp_StorPortMoveMemory:PROC
EXTRN   __imp_StorPortNotification:PROC
EXTRN   __imp_StorPortPause:PROC
EXTRN   __imp_StorPortPauseDevice:PROC
EXTRN   __imp_StorPortQuerySystemTime:PROC
EXTRN   __imp_StorPortReadPortBufferUchar:PROC
EXTRN   __imp_StorPortReadPortBufferUlong:PROC
EXTRN   __imp_StorPortReadPortBufferUshort:PROC
EXTRN   __imp_StorPortReadPortUchar:PROC
EXTRN   __imp_StorPortReadPortUlong:PROC
EXTRN   __imp_StorPortReadPortUshort:PROC
EXTRN   __imp_StorPortReadRegisterBufferUchar:PROC
EXTRN   __imp_StorPortReadRegisterBufferUlong:PROC
EXTRN   __imp_StorPortReadRegisterBufferUshort:PROC
EXTRN   __imp_StorPortReadRegisterUchar:PROC
EXTRN   __imp_StorPortReadRegisterUlong:PROC
EXTRN   __imp_StorPortReadRegisterUshort:PROC
EXTRN   __imp_StorPortReady:PROC
EXTRN   __imp_StorPortRegistryWrite:PROC
EXTRN   __imp_StorPortResume:PROC
EXTRN   __imp_StorPortResumeDevice:PROC
EXTRN   __imp_StorPortSetBusDataByOffset:PROC
EXTRN   __imp_StorPortSetDeviceQueueDepth:PROC
EXTRN   __imp_StorPortStallExecution:PROC
EXTRN   __imp_StorPortSynchronizeAccess:PROC
EXTRN   __imp_StorPortValidateRange:PROC
EXTRN   __imp_StorPortWritePortBufferUchar:PROC
EXTRN   __imp_StorPortWritePortBufferUlong:PROC
EXTRN   __imp_StorPortWritePortBufferUshort:PROC
EXTRN   __imp_StorPortWritePortUchar:PROC
EXTRN   __imp_StorPortWritePortUlong:PROC
EXTRN   __imp_StorPortWritePortUshort:PROC
EXTRN   __imp_StorPortWriteRegisterBufferUchar:PROC
EXTRN   __imp_StorPortWriteRegisterBufferUlong:PROC
EXTRN   __imp_StorPortWriteRegisterBufferUshort:PROC
EXTRN   __imp_StorPortWriteRegisterUchar:PROC
EXTRN   __imp_StorPortWriteRegisterUlong:PROC
EXTRN   __imp_StorPortWriteRegisterUshort:PROC


STUB MACRO ExportName, ImportName, gDiskDumpImportAdress
LOCAL   Dump
PUBLIC  ExportName

    ExportName PROC
        cmp     [gDumpMode], 0
        jnz     Dump
        jmp     QWORD PTR [ImportName]
    Dump:
        jmp     QWORD PTR [gDiskDumpImportAdress]
    ExportName ENDP

ENDM


_TEXT   SEGMENT

STUB ScsiPortMoveMemory_x64,                __imp_ScsiPortMoveMemory, gScsiPortMoveMemory
STUB ScsiPortNotification_x64,              __imp_ScsiPortNotification, gScsiPortNotification
STUB StorPortAllocateRegistryBuffer_x64,    __imp_StorPortAllocateRegistryBuffer, gStorPortAllocateRegistryBuffer
STUB StorPortBusy_x64,                      __imp_StorPortBusy, gStorPortBusy
STUB StorPortCompleteRequest_x64,           __imp_StorPortCompleteRequest, gStorPortCompleteRequest
STUB StorPortConvertUlongToPhysicalAddress_x64,__imp_StorPortConvertUlongToPhysicalAddress, gStorPortConvertUlongToPhysicalAddress
STUB StorPortDebugPrint_x64,                __imp_StorPortDebugPrint, gStorPortDebugPrint
STUB StorPortDeviceBusy_x64,                __imp_StorPortDeviceBusy, gStorPortDeviceBusy
STUB StorPortDeviceReady_x64,               __imp_StorPortDeviceReady, gStorPortDeviceReady
STUB StorPortFreeDeviceBase_x64,            __imp_StorPortFreeDeviceBase, gStorPortFreeDeviceBase
STUB StorPortFreeRegistryBuffer_x64,        __imp_StorPortFreeRegistryBuffer, gStorPortFreeRegistryBuffer
STUB StorPortGetBusData_x64,                __imp_StorPortGetBusData, gStorPortGetBusData
STUB StorPortGetDeviceBase_x64,             __imp_StorPortGetDeviceBase, gStorPortGetDeviceBase
STUB StorPortGetLogicalUnit_x64,            __imp_StorPortGetLogicalUnit, gStorPortGetLogicalUnit
STUB StorPortGetPhysicalAddress_x64,        __imp_StorPortGetPhysicalAddress, gStorPortGetPhysicalAddress
STUB StorPortGetScatterGatherList_x64,      __imp_StorPortGetScatterGatherList, gStorPortGetScatterGatherList
STUB StorPortGetSrb_x64,                    __imp_StorPortGetSrb, gStorPortGetSrb
STUB StorPortGetUncachedExtension_x64,      __imp_StorPortGetUncachedExtension, gStorPortGetUncachedExtension
STUB StorPortGetVirtualAddress_x64,         __imp_StorPortGetVirtualAddress, gStorPortGetVirtualAddress
STUB StorPortLogError_x64,                  __imp_StorPortLogError, gStorPortLogError
STUB StorPortMoveMemory_x64,                __imp_StorPortMoveMemory, gStorPortMoveMemory
STUB StorPortNotification_x64,              __imp_StorPortNotification, gStorPortNotification
STUB StorPortPause_x64,                     __imp_StorPortPause, gStorPortPause
STUB StorPortPauseDevice_x64,               __imp_StorPortPauseDevice, gStorPortPauseDevice
STUB StorPortQuerySystemTime_x64,           __imp_StorPortQuerySystemTime, gStorPortQuerySystemTime
STUB StorPortReadPortBufferUchar_x64,       __imp_StorPortReadPortBufferUchar, gStorPortReadPortBufferUchar
STUB StorPortReadPortBufferUlong_x64,       __imp_StorPortReadPortBufferUlong, gStorPortReadPortBufferUlong
STUB StorPortReadPortBufferUshort_x64,      __imp_StorPortReadPortBufferUshort, gStorPortReadPortBufferUshort
STUB StorPortReadPortUchar_x64,             __imp_StorPortReadPortUchar, gStorPortReadPortUchar
STUB StorPortReadPortUlong_x64,             __imp_StorPortReadPortUlong, gStorPortReadPortUlong
STUB StorPortReadPortUshort_x64,            __imp_StorPortReadPortUshort, gStorPortReadPortUshort
STUB StorPortReadRegisterBufferUchar_x64,   __imp_StorPortReadRegisterBufferUchar, gStorPortReadRegisterBufferUchar
STUB StorPortReadRegisterBufferUlong_x64,   __imp_StorPortReadRegisterBufferUlong, gStorPortReadRegisterBufferUlong
STUB StorPortReadRegisterBufferUshort_x64,  __imp_StorPortReadRegisterBufferUshort, gStorPortReadRegisterBufferUshort
STUB StorPortReadRegisterUchar_x64,         __imp_StorPortReadRegisterUchar, gStorPortReadRegisterUchar
STUB StorPortReadRegisterUlong_x64,         __imp_StorPortReadRegisterUlong, gStorPortReadRegisterUlong
STUB StorPortReadRegisterUshort_x64,        __imp_StorPortReadRegisterUshort, gStorPortReadRegisterUshort
STUB StorPortReady_x64,                     __imp_StorPortReady, gStorPortReady
STUB StorPortRegistryWrite_x64,             __imp_StorPortRegistryWrite, gStorPortRegistryWrite
STUB StorPortResume_x64,                    __imp_StorPortResume, gStorPortResume
STUB StorPortResumeDevice_x64,              __imp_StorPortResumeDevice, gStorPortResumeDevice
STUB StorPortSetBusDataByOffset_x64,        __imp_StorPortSetBusDataByOffset, gStorPortSetBusDataByOffset
STUB StorPortSetDeviceQueueDepth_x64,       __imp_StorPortSetDeviceQueueDepth, gStorPortSetDeviceQueueDepth
STUB StorPortStallExecution_x64,            __imp_StorPortStallExecution, gStorPortStallExecution
STUB StorPortSynchronizeAccess_x64,         __imp_StorPortSynchronizeAccess, gStorPortSynchronizeAccess
STUB StorPortValidateRange_x64,             __imp_StorPortValidateRange, gStorPortValidateRange
STUB StorPortWritePortBufferUchar_x64,      __imp_StorPortWritePortBufferUchar, gStorPortWritePortBufferUchar
STUB StorPortWritePortBufferUlong_x64,      __imp_StorPortWritePortBufferUlong, gStorPortWritePortBufferUlong
STUB StorPortWritePortBufferUshort_x64,     __imp_StorPortWritePortBufferUshort, gStorPortWritePortBufferUshort
STUB StorPortWritePortUchar_x64,            __imp_StorPortWritePortUchar, gStorPortWritePortUchar
STUB StorPortWritePortUlong_x64,            __imp_StorPortWritePortUlong, gStorPortWritePortUlong
STUB StorPortWritePortUshort_x64,           __imp_StorPortWritePortUshort, gStorPortWritePortUshort
STUB StorPortWriteRegisterBufferUchar_x64,  __imp_StorPortWriteRegisterBufferUchar, gStorPortWriteRegisterBufferUchar
STUB StorPortWriteRegisterBufferUlong_x64,  __imp_StorPortWriteRegisterBufferUlong, gStorPortWriteRegisterBufferUlong
STUB StorPortWriteRegisterBufferUshort_x64, __imp_StorPortWriteRegisterBufferUshort, gStorPortWriteRegisterBufferUshort
STUB StorPortWriteRegisterUchar_x64,        __imp_StorPortWriteRegisterUchar, gStorPortWriteRegisterUchar
STUB StorPortWriteRegisterUlong_x64,        __imp_StorPortWriteRegisterUlong, gStorPortWriteRegisterUlong
STUB StorPortWriteRegisterUshort_x64,       __imp_StorPortWriteRegisterUshort, gStorPortWriteRegisterUshort


_TEXT   ends
        END
